# ReviewPilot 系统设计文档

## 系统概述

### 项目背景
在当前高等教育环境中，学生面临着知识点繁多、复习效率低下、个性化学习路径缺乏等问题。ReviewPilot 旨在通过知识图谱技术和数据驱动的方法，为学生提供智能化的复习导航服务。

### 设计目标
1. **个性化学习路径**: 基于学生历史数据生成定制化复习计划
2. **可视化知识管理**: 通过知识图谱直观展示知识点关系
3. **智能诊断评估**: 精准识别学习薄弱环节
4. **完整学习闭环**: 集成学习、练习、评估全流程

## 系统架构设计

### 整体架构

```text
┌─────────────────────────────────────────────────────────────┐
│ 前端展现层 │
├─────────────────────────────────────────────────────────────┤
│ Web前端 (React + TypeScript) │
└─────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────┐
│ API网关层 │
├─────────────────────────────────────────────────────────────┤
│ 路由分发 │ 认证鉴权 │ 请求限流 │ 日志记录 │
└─────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────┐
│ 业务逻辑层 │
├─────────────────────────────────────────────────────────────┤
│ 用户服务 │ 课程服务 │ 图谱服务 │ 诊断服务 │ 测验服务 │ 笔记服务 │
└─────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────┐
│ 数据持久层 │
├─────────────────────────────────────────────────────────────┤
│ MySQL数据库 │ 文件存储 │ 缓存层 │
└─────────────────────────────────────────────────────────────┘
```

### 技术架构特点
- **前后端分离**: RESTful API 接口，前后端独立开发部署
- **模块化设计**: 功能模块解耦，便于维护和扩展
- **响应式设计**: 支持多端访问，自适应不同屏幕尺寸
- **数据驱动**: 基于学习数据分析提供个性化服务
- **类型安全**: 前后端均采用强类型语言

## 前端架构设计

### 技术选型理由
- **React 18**: 现代化的前端框架，优秀的性能和开发体验
- **TypeScript**: 提供完整的类型安全，减少运行时错误
- **Vite**: 快速的构建工具，优秀的热重载体验
- **Zustand**: 轻量级状态管理，简化状态管理复杂度
- **Ant Design**: 企业级UI组件库，提供丰富的组件
- **Emotion**: CSS-in-JS方案，更好的样式封装和维护

### 状态管理设计
采用 Zustand 进行状态管理，设计原则：
- **单一数据源**: 每个store负责特定的状态域
- **不可变更新**: 使用immer或展开运算符进行状态更新
- **类型安全**: 完整的TypeScript类型支持
- **模块化**: 按功能模块划分store

## 核心功能模块设计

### 1. 知识图谱管理模块

#### 功能组成
- **课程管理**: 课程信息维护、课程关系建立
- **知识点建模**: 知识点属性定义、难度分级
- **关系管理**: 前置关系、包含关系、相关关系
- **可视化引擎**: 图谱布局算法、交互操作

#### 数据模型
```text
课程(Course) → 知识点(KnowledgePoint) → 知识点关系(KnowledgeRelation)
```

### 2. 学习诊断系统

#### 诊断流程
```text
数据收集 → 能力评估 → 薄弱识别 → 建议生成
```

#### 评估算法
- **掌握程度计算**: 基于历史成绩加权平均
- **进步趋势分析**: 时间序列数据分析
- **个性化推荐**: 协同过滤 + 内容推荐

### 3. 个性化学习工具

#### 核心功能
- **智能笔记**: 知识点关联、版本管理、富文本编辑
- **附件管理**: 文件上传、分类标签、快速检索
- **学习计划**: 智能排期、进度跟踪、动态调整

### 4. 自测评估系统

#### 测验引擎
- **题目生成**: 基于知识点的随机组卷
- **智能评分**: 自动批改、答案解析
- **数据分析**: 错题分析、能力评估

## 数据库设计

### 核心表结构
- **用户表(User)**: 用户基本信息、学习偏好
- **课程表(Course)**: 课程信息、元数据
- **知识点表(KnowledgePoint)**: 知识点属性、掌握状态
- **成绩表(Score)**: 历史成绩记录、考试信息
- **笔记表(Note)**: 学习笔记、附件信息
- **测验表(Quiz)**: 测验记录、答题详情

### 关系设计
- 一对多: 课程 → 知识点、用户 → 笔记
- 多对多: 知识点关系、用户选课
- 树形结构: 知识点层级关系

## 接口设计原则

### RESTful 规范
- 资源导向的URL设计
- 合适的HTTP方法使用
- 统一的状态码和错误处理
- 标准化的数据格式

### 安全设计
- JWT Token 认证
- API 访问频率限制
- 数据权限控制
- 输入验证和SQL注入防护

## 性能优化策略

### 后端优化
- 数据库索引优化
- 查询缓存策略
- 连接池配置
- 异步处理机制

### 前端优化
- 组件懒加载
- 图片资源优化
- API请求合并
- 本地缓存策略
- 虚拟滚动（长列表）

### 构建优化
- Vite 快速冷启动
- 代码分割和懒加载
- Tree Shaking
- Gzip 压缩

## 扩展性设计

### 微服务化准备
- 模块化业务逻辑
- 统一的接口规范
- 独立的数据访问层

### 功能扩展点
- 第三方学习资源集成
- 多维度学习分析
- 社交化学习功能
- 移动端应用支持

## 部署架构

### 开发环境
- 本地开发服务器
- 云数据库服务
- 热重载开发支持

### 生产环境
- Nginx 反向代理
- 静态资源CDN
- 数据库读写分离
- 负载均衡