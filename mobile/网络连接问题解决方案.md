# 网络连接问题解决方案

## 问题描述
应用无法连接后端服务器，所有网络请求都失败。

## 问题原因
所有控制器都硬编码了后端地址 `http://10.6.74.82:8080`，这是一个内网IP地址。当你更换网络环境后，就无法访问这个地址了。

## 解决方案

### 1. 修改后端地址配置
编辑 `entry/src/main/ets/config/ApiConfig.ets` 文件：

```typescript
export class ApiConfig {
  // 根据你的实际情况修改以下地址：
  static readonly BASE_URL: string = 'http://10.6.74.82:8080';
  
  // 备用选项（取消注释使用）：
  // static readonly BASE_URL: string = 'http://localhost:8080';           // 本地开发
  // static readonly BASE_URL: string = 'http://192.168.1.100:8080';       // 家庭网络
  // static readonly BASE_URL: string = 'http://your-server.com:8080';     // 生产环境
}
```

### 2. 如何确定正确的后端地址

#### 如果后端在本地运行：
1. 打开命令行，输入 `ipconfig` (Windows) 或 `ifconfig` (Mac/Linux)
2. 找到你的本地IP地址（通常是 192.168.x.x 或 10.x.x.x）
3. 将配置改为：`http://你的IP地址:8080`

#### 如果后端在远程服务器：
1. 确认服务器的公网IP地址
2. 确保服务器防火墙开放了8080端口
3. 将配置改为：`http://服务器IP:8080`

#### 如果后端在云服务：
1. 使用云服务提供的域名或IP地址
2. 确保安全组规则允许8080端口访问

### 3. 测试连接
修改配置后，重新编译运行应用，尝试登录或获取课程列表来测试连接。

### 4. 常见问题排查

#### 问题：连接超时
- 检查后端服务是否正在运行
- 确认IP地址和端口号正确
- 检查防火墙设置

#### 问题：权限被拒绝
- 确认应用有网络权限（已在module.json5中配置）
- 检查后端是否允许跨域请求

#### 问题：404错误
- 确认API端点路径正确
- 检查后端路由配置

### 5. 开发建议
为了方便不同环境切换，你可以：

1. 创建多个配置文件（开发、测试、生产）
2. 使用环境变量来控制配置
3. 添加网络状态检测功能

## 已完成的修改
✅ 创建了统一的API配置文件 `ApiConfig.ets`
✅ 修改了所有控制器使用配置文件
✅ 统一了超时时间配置
✅ 添加了API端点常量

现在你只需要修改 `ApiConfig.ets` 中的 `BASE_URL` 即可切换后端地址！